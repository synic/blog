{
  "published_at": "2007-03-27T21:29:00-07:00",
  "body": "\u003c!-- :metadata:\n\ntitle: Setting up icecast2 to stream mp3s on Ubuntu\ntags:\npublished: 2007-03-27T21:29:00-0700\nsummary:\n\nI do this every time I have to reinstall the OS on my work machine... and as\nyou saw in the previous article, it's about that time again.  I always forget\nto save the configuration files for it....\n\n--\u003e\n\u003cp\u003eI do this every time I have to reinstall the OS on my work machine... and as\nyou saw in the previous article, it's about that time again.  I always forget\nto save the configuration files for it....\u003c/p\u003e\n\u003cp\u003eLet's start with this:\u003c/p\u003e\n\u003cpre class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ sudo apt-get install icecast2 liblame-dev build-essential \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  libxml2-dev libshout3-dev\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe will be using ices to stream to the server.  The package available in Ubuntu\ndoes not have mp3 support, so we're going to compile a custom one against\nliblame-dev.  You can download ices from here:\n\u003ca href='http://downloads.us.xiph.org/releases/ices/ices-0.4.tar.gz'\u003e\nhttp://downloads.us.xiph.org/releases/ices/ices-0.4.tar.gz\n\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eRun the following once you've got it:\u003c/p\u003e\n\u003cpre class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ tar -jxvf ices-0.4.tar.bz2\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ \u003cspan class=\"nb\"\u003ecd\u003c/span\u003e ices-0.4\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ ./configure --with-lame --prefix\u003cspan class=\"o\"\u003e=\u003c/span\u003e/usr\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ make\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ sudo make install\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow comes the configuration.  Edit \u003ccode\u003e/etc/icecast2/icecast.xml\u003c/code\u003e.  Find the section\nabout authentication and change the source password.  This is the password that\nices will be using to communicate with the server.  Edit /etc/default/icecast2\nand change \u0026quot;ENABLED\u0026quot; to true.\u003c/p\u003e\n\u003cp\u003eStart the server like so:\u003c/p\u003e\n\u003cpre class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ /etc/init.d/icecast2 start\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou're going to need to create a log directory for ices:\u003c/p\u003e\n\u003cpre class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ sudo mkdir /var/log/ices \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e chown youruser /var/log/ices\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThere is a file in the ices source directory - \u003ccode\u003econf/ices.conf.dist\u003c/code\u003e.  Edit it.\nYou'll want to change the stream name, genre, description, the name of the file\nthat will contain your playlist, whether or not you want the playlist to be\nrandom (use 0 for no and 1 for yes), and password (use the same password that\nyou used in the icecast2 configuration file).  Save the file somewhere as\nices.conf.\u003c/p\u003e\n\u003cp\u003eNow to create your playlist.  Use the full path when using find like so:\u003c/p\u003e\n\u003cpre class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ find /home/synic/music -name \u003cspan class=\"s2\"\u003e\u0026#34;*.mp3\u0026#34;\u003c/span\u003e \u0026gt; ~/playlist.txt\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThen, you can run ices using that configuration file:\u003c/p\u003e\n\u003cpre class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ ices -c ices.conf\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou should then be able to connect to your station with your favorite player by\nusing the address http://localhost:8000/ices.  You can, of course, change\n\u003ccode\u003elocalhost\u003c/code\u003e to your ip.\u003c/p\u003e\n\u003cp\u003eThat's it!\u003c/p\u003e\n\u003cdiv class='vimtip'\u003e\n\u003ch3\u003e\u003cb\u003evim tip:\u003c/b\u003e \u003ci\u003eSplit Windows\u003c/i\u003e\u003c/h3\u003e\n\u003cp\u003e\nYou can have as many split windows as you want in vim.  To split horizontally,\ntype \u003cb\u003e:sp\u003c/b\u003e, optionally with the file you want to edit.  To split\nvertically, type \u003cb\u003e:vs\u003c/b\u003e.  To navigate between the windows, you can use\n\u003cb\u003eCtrl+W\u003c/b\u003e followed by one of the directional keys \u003cb\u003eh j k\u003c/b\u003e, and\n\u003cb\u003el\u003c/b\u003e\n\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"restored-from-archive\"\u003e\n  \u003ch3\u003eRestored from VimTips archive\u003c/h3\u003e\n  \u003cp\u003e\n  This article was restored from the VimTips archive. There's probably\n  missing images and broken links (and even some flash references), but it\n  was still important to me to bring them back.\n  \u003c/p\u003e\n\u003c/div\u003e\n",
  "summary": "\u003cp\u003eI do this every time I have to reinstall the OS on my work machine... and as\nyou saw in the previous article, it's about that time again.  I always forget\nto save the configuration files for it....\u003c/p\u003e\n",
  "title": "Setting up icecast2 to stream mp3s on Ubuntu",
  "slug": "setting-up-icecast2-to-stream-mp3s-on-ubuntu",
  "tags": [],
  "is_published": true
}